{{>partials/header}}

<section class="container py-5" style="padding-bottom: 100px !important;">
    <style>
        .players-table-wrapper {
            max-height: 500px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .players-table {
            min-width: 100%;
        }

        .players-table th,
        .players-table td {
            vertical-align: middle;
        }

        .players-table-wrapper th.mail-col,
        .players-table-wrapper td.mail-col {
            min-width: 240px;
            white-space: normal;
            word-break: break-word;
            overflow-wrap: anywhere;
        }

        .players-table-wrapper td.role-cell {
            overflow: visible;
        }

        .badge-role {
            display: inline-flex;
            align-items: center;
            padding: 0.35rem 0.9rem;
            border-radius: 999px;
            font-weight: 600;
            white-space: nowrap;
        }

        @media (max-width: 768px) {
            .players-table-wrapper {
                max-height: none;
                overflow: visible;
            }

            .players-table thead {
                display: none;
            }

            .players-table tbody {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            .players-table tr {
                display: block;
                background-color: rgba(255, 255, 255, 0.85);
                border-radius: 1rem;
                padding: 1.25rem;
                box-shadow: 0 8px 20px rgba(15, 23, 42, 0.1);
            }

            .players-table td {
                display: flex;
                justify-content: space-between;
                text-align: left;
                border: none;
                padding: 0.35rem 0;
                font-size: 0.95rem;
            }

            .players-table td::before {
                content: attr(data-label);
                font-weight: 600;
                color: #475569;
                margin-right: 1rem;
                flex-basis: 50%;
            }

            .players-table td.mail-col {
                word-break: break-all;
            }

            .table-avatar {
                justify-content: flex-start;
                margin-bottom: 0.5rem;
            }

            .table-avatar img {
                width: 72px;
                height: 72px;
            }
        }
    </style>
    <div class="row justify-content-center">
        <div class="col-12 col-xl-10">
            <div class="app-card p-4 p-md-5 mb-4 text-dark">
                <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
                    <div>
                        <p class="section-title mb-2">Comunidad de jugadores</p>
                        <p class="subtext mb-0">Conocé a tus rivales, seguí los puntajes y descubrí quién lidera el tablero.</p>
                    </div>
                    <div class="d-flex gap-2">
                        <a href="/jugadores/sugerirPregunta" class="btn btn-outline-primary btn-lg fw-semibold shadow-sm">Sugerir Pregunta</a>
                        <a href="/partida/inicioPartida" class="btn btn-warning btn-lg fw-semibold shadow-sm text-dark">Jugar partida</a>
                    </div>
                </div>
            </div>

            <div class="card border-0 shadow-lg overflow-hidden">
                <div class="card-header bg-dark text-white d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2">
                    <div>
                        <h2 class="h5 mb-0">Ranking de Mejores Jugadores</h2>
                        <small class="opacity-75">Top 7 jugadores con mayor puntaje</small>
                    </div>
                </div>
                <div class="players-table-wrapper">
                    <table class="table table-hover table-striped align-middle text-center mb-0 players-table">
                        <thead class="table-dark">
                            <tr>
                                <th>#</th>
                                <th>FOTO</th>
                                <th>USUARIO</th>
                                <th>PUNTAJE</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#jugadores}}
                                <tr>
                                    <td class="fw-semibold text-primary" data-label="Posición">{{posicion}}</td>
                                    <td class="table-avatar" data-label="Foto">
                                        <a href="/perfil/ver?id={{id}}" class="text-decoration-none">
                                            {{#fotoPerfil}}
                                                <img src="{{fotoPerfil}}" alt="Foto de {{usuario}}">
                                            {{/fotoPerfil}}
                                            {{^fotoPerfil}}
                                                <img src="/images/usuario.png" alt="Avatar genérico">
                                            {{/fotoPerfil}}
                                        </a>
                                    </td>
                                    <td class="fw-semibold" data-label="Usuario">
                                        <a href="/perfil/ver?id={{id}}" class="text-decoration-none text-dark fw-bold">{{usuario}}</a>
                                    </td>
                                    <td class="fw-semibold" data-label="Puntaje">{{puntajeTotal}}</td>
                                </tr>
                            {{/jugadores}}
                            {{^jugadores}}
                                <tr>
                                    <td colspan="5" class="py-5 text-muted">Todavía no hay jugadores con puntaje registrado.</td>
                                </tr>
                            {{/jugadores}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>

{{>partials/footer}}

